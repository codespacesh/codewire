apiVersion: codewire.io/v1alpha1
kind: CodewireRelay
metadata:
  name: example
  namespace: default
spec:
  baseURL: https://example.relay.codewire.sh
  authMode: token
  persistence:
    size: 1Gi
  ingress:
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
  ssh:
    service:
      type: LoadBalancer
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  # OIDC authentication (uncomment to use instead of token mode):
  # authMode: oidc
  # oidc:
  #   issuer: https://auth.codewire.sh
  #   clientID: codewire-relay
  #   clientSecretRef:
  #     name: codewire-oidc-secret
  #     key: client-secret
  #   allowedGroups:
  #     - sonica
