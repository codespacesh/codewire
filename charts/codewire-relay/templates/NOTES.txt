Codewire Relay has been deployed!

1. Get the relay URL:
{{- if .Values.ingress.enabled }}
  Your relay is available at: {{ .Values.relay.baseURL }}
{{- else }}
  kubectl port-forward svc/{{ include "codewire-relay.fullname" . }}-http 8080:8080 -n {{ .Release.Namespace }}
  Relay URL: http://localhost:8080
{{- end }}

2. Get the WireGuard endpoint:
{{- if eq .Values.wireguard.service.type "LoadBalancer" }}
  export WG_IP=$(kubectl get svc {{ include "codewire-relay.fullname" . }}-wg -n {{ .Release.Namespace }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  echo "WireGuard endpoint: ${WG_IP}:{{ .Values.relay.wgPort }}"
  NOTE: It may take a few minutes for the LoadBalancer IP to be assigned.
{{- else }}
  WireGuard service type: {{ .Values.wireguard.service.type }}
  kubectl get svc {{ include "codewire-relay.fullname" . }}-wg -n {{ .Release.Namespace }}
{{- end }}

3. Get the auth token:
{{- if eq .Values.relay.authMode "token" }}
  kubectl get secret {{ include "codewire-relay.fullname" . }} -n {{ .Release.Namespace }} -o jsonpath='{.data.auth-token}' | base64 -d
{{- else }}
  Auth mode is "{{ .Values.relay.authMode }}" â€” no token required.
{{- end }}

4. Connect a node:
  cw setup {{ .Values.relay.baseURL }}

  Or set environment variables:
  export CW_RELAY_URL={{ .Values.relay.baseURL }}
{{- if eq .Values.relay.authMode "token" }}
  export CW_AUTH_TOKEN=$(kubectl get secret {{ include "codewire-relay.fullname" . }} -n {{ .Release.Namespace }} -o jsonpath='{.data.auth-token}' | base64 -d)
{{- end }}
  cw start
